(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(42)},23:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),l=(n(23),n(5)),u=n.n(l),i=n(16),s=n(4),d=n(3),f=function(e){var t=e.search,n=e.handleSearch;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("input",{placeholder:"Search..",value:t,onChange:n})))},m=function(e){var t=e.handleData,n=e.newPost,a=e.handleChange;return r.a.createElement("div",null,r.a.createElement("h3",null,"Add a new phone"),r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"Title: ",r.a.createElement("input",{value:n.title||"",name:"title",onChange:a})),r.a.createElement("div",null,"Author: ",r.a.createElement("input",{value:n.author||"",name:"author",onChange:a})),r.a.createElement("div",null,"URL: ",r.a.createElement("input",{value:n.url||"",name:"url",onChange:a})),r.a.createElement("div",null,"Likes: ",r.a.createElement("input",{value:n.likes||"",name:"likes",onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},p=function(e){var t=e.post,n=e.deletePost;return r.a.createElement("li",null,t.title," ",t.author," ",r.a.createElement("a",{href:t.url},"link")," ",t.likes,r.a.createElement("button",{title:t.title,value:t.id,onClick:n},"del"))},h={color:"grey",paddingTop:"5px",fontSize:"15px"},v=function(e){var t=e.searchFilter,n=e.deletePost,a=e.updatePost;return r.a.createElement("div",null,r.a.createElement("h2",null,"Posts"),r.a.createElement("ol",{style:h},t().map(function(e,t){return r.a.createElement(p,{key:t,post:e,deletePost:n,updatePost:a})})))},g=n(2),E=n.n(g),b=function(){return E.a.get("/api/posts").then(function(e){return e.data})},w=function(e){return E.a.post("/api/posts",e).then(function(e){return e.data})},y=function(e,t){return E.a.put("".concat("/api/posts","/").concat(e),t).then(function(e){return e.data})},k=function(e){return E.a.delete("".concat("/api/posts","/").concat(e)).then(function(e){return e.data})},j={display:"block",color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},O={display:"block",color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},S={display:"none"},x=function(e){var t=e.message;return"success"===t[0]?r.a.createElement("div",{style:O},t[1]):"error"===t[0]?r.a.createElement("div",{style:j},t[1]):r.a.createElement("div",{style:S})},P=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)([]),l=Object(d.a)(c,2),p=l[0],h=l[1],g=Object(a.useState)(""),E=Object(d.a)(g,2),j=E[0],O=E[1],S=Object(a.useState)([]),P=Object(d.a)(S,2),C=P[0],T=P[1];Object(a.useEffect)(function(){b().then(function(e){o(e)}).catch(function(e){console.log(e.message)})},[]);var D=function(e){return n.find(function(t){return void 0!==t?t.title===e:void 0})},B=function(e){w(e).then(function(t){o(n.concat(t)),T(["success","'".concat(e.title,"' was added")]),setTimeout(function(){T([])},5e3)}).catch(function(e){T(["error",e.response.data.error]),setTimeout(function(){T([])},5e3)})},L=function(e,t){window.confirm("".concat(e.title," is already added to phonebook. Do you want to replace it?"))&&y(e.id,t).then(function(t){o(n.map(function(n){return n.id!==e.id?n:t})),T(["success","'".concat(e.title,"' was updated")]),setTimeout(function(){T([])},5e3)}).catch(function(e){console.log(e.response),T(["error",e.response.data.error]),setTimeout(function(){T([])},5e3)})},z=function(){var e=Object(i.a)(u.a.mark(function e(t){var n,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n={title:p.title,author:p.author,url:p.url,likes:p.likes},void 0===(a=D(n.title))?B(n):L(a,n),h([]);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h2",null,"Blog posts"),r.a.createElement(x,{message:C}),r.a.createElement(f,{search:j,handleSearch:function(e){O(e.target.value)}}),r.a.createElement(m,{handleData:z,newPost:p,handleChange:function(e){if("title"===e.target.name){var t=e.target.value;h(function(e){return Object(s.a)({},e,{title:t})})}if("author"===e.target.name){var n=e.target.value;h(function(e){return Object(s.a)({},e,{author:n})})}if("likes"===e.target.name){var a=e.target.value;h(function(e){return Object(s.a)({},e,{likes:a})})}if("url"===e.target.name){var r=e.target.value;h(function(e){return Object(s.a)({},e,{url:r})})}}}),r.a.createElement(v,{searchFilter:function(){return n.filter(function(e){return e.title.toLowerCase().includes(j.toLowerCase())})},deletePost:function(e){e.preventDefault();var t=e.target.title;window.confirm("Do you want to delete ".concat(t))&&k(e.target.value).then(function(){o(n.filter(function(e){return e.title!==t})),T(["success","'".concat(t,"' was deleted")]),setTimeout(function(){T([])},5e3)}).catch(function(e){console.log(e),T(["error","Post '".concat(t,"' was already deleted")]),setTimeout(function(){T([])},5e3),o(n.filter(function(e){return e.title!==t}))})},updatePost:L}))};c.a.render(r.a.createElement(P,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.e7ded530.chunk.js.map