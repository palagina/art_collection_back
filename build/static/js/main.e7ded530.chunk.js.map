{"version":3,"sources":["components/Search.js","components/AddNew.js","components/Post.js","components/PostList.js","services/posts.js","components/Notification.js","App.js","index.js"],"names":["Search","_ref","search","handleSearch","react_default","a","createElement","placeholder","value","onChange","AddNew","handleData","newPost","handleChange","onSubmit","title","name","author","url","likes","type","Post","post","deletePost","href","id","onClick","postListStyle","color","paddingTop","fontSize","PostList","searchFilter","updatePost","style","map","components_Post","key","services_posts","axios","get","then","response","data","newObject","put","concat","delete","errorStyle","display","background","borderStyle","borderRadius","padding","marginBottom","successStyle","noMessage","Notification","message","App","_useState","useState","_useState2","Object","slicedToArray","posts","setPosts","_useState3","_useState4","setNewPost","_useState5","_useState6","setSearch","_useState7","_useState8","setMessage","useEffect","postService","initialPosts","catch","error","console","log","checkExisting","newTitle","find","undefined","addPost","postObject","returnedPost","setTimeout","postMatch","window","confirm","updatedPost","asyncToGenerator","regenerator_default","mark","_callee","event","wrap","_context","prev","next","preventDefault","stop","_x","apply","this","arguments","components_Notification","components_Search","target","components_AddNew","prevState","objectSpread","newAuthor","newLikes","newUrl","components_PostList","filter","toLowerCase","includes","deletedPostTitle","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.e7ded530.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Search = ({ search, handleSearch }) => {\r\n\r\n  return (\r\n    <div>\r\n     <form>\r\n        <input placeholder=\"Search..\" value={search} onChange={handleSearch}/>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Search","import React from \"react\";\r\n\r\nconst AddNew = ({ handleData, newPost, handleChange}) => {\r\n  return (\r\n    <div>\r\n     <h3>Add a new phone</h3>\r\n     <form onSubmit={handleData}>\r\n        <div>\r\n          Title: <input value={newPost.title || \"\"} name=\"title\" onChange={handleChange} />\r\n        </div>\r\n        <div>\r\n          Author: <input value={newPost.author || \"\"} name=\"author\" onChange={handleChange} />\r\n        </div>\r\n        <div>\r\n          URL: <input value={newPost.url || \"\"} name=\"url\" onChange={handleChange} />\r\n        </div>\r\n        <div>\r\n          Likes: <input value={newPost.likes || \"\"} name=\"likes\" onChange={handleChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddNew","import React from 'react'\r\n\r\nconst Post = ({post, deletePost}) => {\r\n  return (\r\n    <li>\r\n    {post.title} {post.author} <a href={post.url}>link</a> {post.likes} \r\n    <button title={post.title} value={post.id} onClick={deletePost}>del</button>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Post","import React from \"react\";\r\nimport Post from \"./Post\";\r\n\r\nconst PostList = ({ searchFilter, deletePost, updatePost }) => {\r\n  const postList = () =>\r\n    searchFilter().map((post, id) => (\r\n      <Post key={id} post={post} deletePost={deletePost} updatePost={updatePost} />\r\n    ));\r\n\r\n  return (\r\n    <div>\r\n      <h2>Posts</h2>\r\n      <ol style={postListStyle}>{postList()}</ol>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst postListStyle = {\r\n    color: \"grey\",\r\n    paddingTop: \"5px\",\r\n    fontSize: \"15px\",\r\n}\r\n\r\nexport default PostList;\r\n","import axios from \"axios\";\r\nconst baseUrl = '/api/posts';\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst remove = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nexport default { getAll, create, update, remove };\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message[0] === \"success\") {\r\n    return <div style={successStyle}>{message[1]}</div>;\r\n  } else if (message[0] === \"error\") {\r\n    return <div style={errorStyle}>{message[1]}</div>;\r\n  } else {\r\n    return <div style={noMessage}></div>;\r\n  }\r\n};\r\n\r\nconst errorStyle = {\r\n  display: \"block\",\r\n  color: \"red\",\r\n  background: \"lightgrey\",\r\n  fontSize: \"20px\",\r\n  borderStyle: \"solid\",\r\n  borderRadius: \"5px\",\r\n  padding: \"10px\",\r\n  marginBottom: \"10px\"\r\n};\r\n\r\nconst successStyle = {\r\n  display: \"block\",\r\n  color: \"green\",\r\n  background: \"lightgrey\",\r\n  fontSize: \"20px\",\r\n  borderStyle: \"solid\",\r\n  borderRadius: \"5px\",\r\n  padding: \"10px\",\r\n  marginBottom: \"10px\"\r\n};\r\n\r\nconst noMessage = {\r\n  display: \"none\",\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Search from \"./components/Search\";\r\nimport AddNew from \"./components/AddNew\";\r\nimport PostList from \"./components/PostList\";\r\nimport postService from \"./services/posts\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nconst App = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [newPost, setNewPost] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [message, setMessage] = useState([]);\r\n\r\n  useEffect(() => {\r\n    postService\r\n      .getAll()\r\n      .then(initialPosts => {\r\n        setPosts(initialPosts);\r\n      })\r\n      .catch(error => {\r\n        console.log(error.message);\r\n      });\r\n  }, []);\r\n\r\n  //Search\r\n  const searchFilter = () =>\r\n    posts.filter(post =>\r\n      post.title.toLowerCase().includes(search.toLowerCase())\r\n    );\r\n  const handleSearch = event => {\r\n    setSearch(event.target.value);\r\n  };\r\n\r\n  //NewPost state change\r\n  const handleChange = event => {\r\n    if(event.target.name === \"title\") {\r\n      const newTitle = event.target.value\r\n      setNewPost(prevState => {\r\n        return { ...prevState, title: newTitle };\r\n      });  \r\n    }\r\n    if(event.target.name === \"author\") {\r\n      const newAuthor = event.target.value\r\n      setNewPost(prevState => {\r\n        return { ...prevState, author: newAuthor };\r\n      });\r\n    }\r\n    if(event.target.name === \"likes\") {\r\n      const newLikes = event.target.value\r\n      setNewPost(prevState => {\r\n        return { ...prevState, likes: newLikes };\r\n      });\r\n    }\r\n    if(event.target.name === \"url\") {\r\n      const newUrl = event.target.value\r\n      setNewPost(prevState => {\r\n        return { ...prevState, url: newUrl };\r\n      });\r\n    }\r\n  };\r\n\r\n  //Checks and returns already existing post or undefined\r\n  const checkExisting = newTitle => {\r\n    const titleMatch = posts.find(post => post!==undefined ? (post.title === newTitle) : undefined)\r\n    return titleMatch;\r\n  };\r\n\r\n  //Add a new title\r\n  const addPost = postObject => {\r\n    postService\r\n      .create(postObject)\r\n      .then(returnedPost => {\r\n        setPosts(posts.concat(returnedPost));\r\n        setMessage([\"success\", `'${postObject.title}' was added`]);\r\n        setTimeout(() => {\r\n          setMessage([]);\r\n        }, 5000);\r\n      })\r\n      .catch(error => {\r\n        setMessage([\"error\", error.response.data.error]);\r\n        setTimeout(() => {\r\n          setMessage([]);\r\n        }, 5000);\r\n      });\r\n  };\r\n\r\n  //Update existing post\r\n  const updatePost = (postMatch, postObject) => {\r\n    if (window.confirm(`${postMatch.title} is already added to phonebook. Do you want to replace it?`)) {\r\n      postService\r\n        .update(postMatch.id, postObject)\r\n        .then(updatedPost => {\r\n          setPosts(\r\n            posts.map(post => (post.id !== postMatch.id ? post : updatedPost))\r\n          );\r\n          setMessage([\"success\", `'${postMatch.title}' was updated`]);\r\n          setTimeout(() => {\r\n            setMessage([]);\r\n          }, 5000);\r\n        })\r\n        .catch(error => {\r\n          console.log(error.response);\r\n          setMessage([\"error\", error.response.data.error]);\r\n          setTimeout(() => {\r\n            setMessage([]);\r\n          }, 5000);\r\n        });\r\n    }\r\n  };\r\n\r\n  //Handle add or update functionality\r\n  const handleData = async(event) => {\r\n    event.preventDefault();\r\n    const postObject = {\r\n      title: newPost.title,\r\n      author: newPost.author,\r\n      url: newPost.url,\r\n      likes: newPost.likes\r\n    };\r\n    const postMatch = checkExisting(postObject.title);\r\n    postMatch === undefined\r\n      ? addPost(postObject)\r\n      : updatePost(postMatch, postObject);\r\n      setNewPost([])\r\n  };\r\n\r\n  //Delete post\r\n  const deletePost = event => {\r\n    event.preventDefault();\r\n    const deletedPostTitle = event.target.title;\r\n    if (window.confirm(`Do you want to delete ${deletedPostTitle}`)) {\r\n      postService\r\n        .remove(event.target.value)\r\n        .then(() => {\r\n          setPosts(posts.filter(post => post.title !== deletedPostTitle));\r\n          setMessage([\"success\", `'${deletedPostTitle}' was deleted`]);\r\n          setTimeout(() => {\r\n            setMessage([]);\r\n          }, 5000);\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n          setMessage([\r\n            \"error\",\r\n            `Post '${deletedPostTitle}' was already deleted`\r\n          ]);\r\n          setTimeout(() => {\r\n            setMessage([]);\r\n          }, 5000);\r\n          setPosts(posts.filter(post => post.title !== deletedPostTitle));\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Blog posts</h2>\r\n      <Notification message={message} />\r\n      <Search search={search} handleSearch={handleSearch} />\r\n      <AddNew\r\n        handleData={handleData}\r\n        newPost={newPost}\r\n        handleChange={handleChange}\r\n      />\r\n      <PostList\r\n        searchFilter={searchFilter}\r\n        deletePost={deletePost}\r\n        updatePost={updatePost}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}